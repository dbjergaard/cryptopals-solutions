#!/usr/bin/env ruby 
require 'curb'
require 'crypto_tools'
require 'block_crypto'
require 'openssl'

def challenge9
  if Converters.str_to_hex("YELLOW SUBMARINE".pkcs7pad(20)).slice(32,8)!="04040404"
    raise "Error padding string to 20 bytes!"
  else
    puts "Challenge 9 passed!"
  end
end
def challenge10
  cipher_http = Curl.get("http://cryptopals.com/static/challenge-data/10.txt")
  key="YELLOW SUBMARINE"
  iv=Converters.hex_to_bytes("00000000000000000000000000000000")
  clear_text=BlockCrypto.aes_cbc_decrypt(Base64.decode64(cipher_http.body_str),key,iv)
  if clear_text.split(/\n/)[-1] != "Play that funky music "
    raise "Challenge 10 failed!"
  else
    puts "Challenge 10 passed!"
  end
end
def challenge11
  
end
def run_challenges
  challenge9
  challenge10
end

run_challenges

